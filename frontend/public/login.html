<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sign in to TiltCheck with Discord OAuth. Access your dashboard, track trust scores, and manage your profile.">
  <meta name="theme-color" content="#00d4aa">
  <title>Sign In - TiltCheck</title>
  <link rel="stylesheet" href="/styles/theme.css">
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/svg+xml" href="/assets/logo/favicon-white.svg">
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      padding: 1rem;
    }

    main {
      width: 100%;
      max-width: 450px;
    }

    .login-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 212, 170, 0.2);
      border-radius: 1rem;
      padding: 3rem 2rem;
      text-align: center;
    }

    .login-logo {
      width: 64px;
      height: 64px;
      margin: 0 auto 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: white;
      font-weight: 700;
    }

    .subtitle {
      color: var(--color-text-secondary);
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .login-btn-container {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .discord-login-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      padding: 1rem 1.5rem;
      background: #5865F2;
      color: white;
      border: none;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      width: 100%;
    }

    .discord-login-btn:hover {
      background: #4752C4;
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(88, 101, 242, 0.3);
    }

    .discord-logo {
      width: 20px;
      height: 20px;
    }

    .divider {
      display: flex;
      align-items: center;
      margin: 2rem 0;
      color: var(--color-text-secondary);
      font-size: 0.875rem;
    }

    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: rgba(0, 212, 170, 0.1);
    }

    .divider span {
      margin: 0 1rem;
    }

    .benefits {
      background: rgba(0, 212, 170, 0.05);
      border-left: 3px solid var(--color-primary);
      padding: 1.5rem;
      border-radius: 0.5rem;
      margin-bottom: 2rem;
      text-align: left;
    }

    .benefits h3 {
      font-size: 0.875rem;
      color: var(--color-primary);
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.05em;
    }

    .benefits ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .benefits li {
      color: var(--color-text-secondary);
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .benefits li::before {
      content: '‚úì';
      color: var(--color-primary);
      font-weight: bold;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(0, 212, 170, 0.1);
      font-size: 0.875rem;
    }

    .footer-links a {
      color: var(--color-primary);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: #00a8ff;
      text-decoration: underline;
    }

    .security-note {
      margin-top: 1.5rem;
      padding: 1rem;
      background: rgba(255, 193, 7, 0.05);
      border: 1px solid rgba(255, 193, 7, 0.2);
      border-radius: 0.5rem;
      font-size: 0.75rem;
      color: var(--color-text-secondary);
      text-align: left;
    }

    .security-note strong {
      color: var(--color-text-primary);
      display: block;
      margin-bottom: 0.5rem;
    }

    @media (max-width: 640px) {
      .login-card {
        padding: 2rem 1.5rem;
      }

      h1 {
        font-size: 1.5rem;
      }

      .footer-links {
        flex-direction: column;
        gap: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <main id="main-content">
    <div class="login-card">
      <div class="login-logo">üéÆ</div>
      
      <h1>Sign in to TiltCheck</h1>
      <p class="subtitle">Connect your Discord account to access your dashboard, track trust scores, and manage your profile across the ecosystem.</p>

      <div class="benefits">
        <h3>Why sign in?</h3>
        <ul>
          <li>Access your personal trust dashboard</li>
          <li>Manage wallet addresses and earnings</li>
          <li>Track tips sent and received</li>
          <li>View activity across all tools</li>
        </ul>
      </div>

      <div class="login-btn-container">
        <button class="discord-login-btn" id="discord-login-btn">
          <svg class="discord-logo" viewBox="0 0 127.14 96.36" fill="currentColor">
            <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0A105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36a77.7,77.7,0,0,0,6.6-13.52,68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a77.15,77.15,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.6,13.52A105.73,105.73,0,0,0,126.6,80.22h0C129.24,55.89,124.11,32.73,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60.55,31,53.88s5-11.81,11.45-11.81S54,47.16,53.89,53.88,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60.55,73.25,53.88s5-11.81,11.44-11.81S96.23,47.16,96.12,53.88,91.08,65.69,84.69,65.69Z"/>
          </svg>
          Sign in with Discord
        </button>
      </div>

      <div class="divider">
        <span>Already connected?</span>
      </div>

      <p style="color: var(--color-text-secondary); margin-bottom: 1rem; font-size: 0.875rem;">
        Your session will persist automatically. We use Supabase OAuth for secure authentication.
      </p>

      <div class="security-note">
        <strong>üîí Privacy Notice</strong>
        We only access your Discord username and avatar. No sensitive data is stored on our servers. You can revoke access anytime in your Discord settings.
      </div>

      <div class="footer-links">
        <a href="/">‚Üê Back Home</a>
        <a href="/privacy.html">Privacy</a>
        <a href="/terms.html">Terms</a>
        <a href="/contact.html">Support</a>
      </div>
    </div>
  </main>

  <!-- Auth Script -->
  <script>
    document.getElementById('discord-login-btn')?.addEventListener('click', async () => {
      try {
        // Check if auth.js is available from other pages
        if (window.tiltCheckAuth?.loginWithDiscord) {
          await window.tiltCheckAuth.loginWithDiscord();
        } else {
          // Fallback: Generate OAuth URL via Supabase
          const supabaseUrl = 'https://ypyvqddzrdjzfdwhcacb.supabase.co';
          const redirectUrl = `${window.location.origin}/`;
          const oauthUrl = `${supabaseUrl}/auth/v1/authorize?provider=discord&redirect_to=${encodeURIComponent(redirectUrl)}`;
          window.location.href = oauthUrl;
        }
      } catch (error) {
        console.error('Auth error:', error);
        alert('Login failed. Please try again.');
      }
    });
  </script>
</body>
</html>
