[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:nginx]
command=/usr/sbin/nginx -g 'daemon off;'
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=10

[program:landing]
command=/usr/local/bin/node /app/services/landing/server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=PORT="3000",NODE_ENV="production"

[program:dashboard]
command=/usr/local/bin/node /app/services/dashboard/dist/server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=PORT="5055",NODE_ENV="production"

[program:discord-bot]
command=/usr/local/bin/node /app/apps/discord-bot/dist/index.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=30
environment=NODE_ENV="production",DISCORD_BOT_HEALTH_PORT="8081"

[program:dad-bot]
command=/usr/local/bin/node /app/apps/dad-bot/dist/index.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=30
environment=NODE_ENV="production",DAD_BOT_HEALTH_PORT="8082",DISCORD_TOKEN="%(ENV_DAD_DISCORD_TOKEN)s",DISCORD_CLIENT_ID="%(ENV_DAD_DISCORD_CLIENT_ID)s",DISCORD_GUILD_ID="%(ENV_DAD_DISCORD_GUILD_ID)s"

[program:ai-gateway]
command=/usr/local/bin/node /app/services/ai-gateway/server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=AI_GATEWAY_PORT="3001",NODE_ENV="production"

[program:trust-rollup]
command=/usr/local/bin/node /app/services/trust-rollup/dist/index.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=TRUST_ROLLUP_HEALTH_PORT="8083",NODE_ENV="production"

[program:game-arena]
command=/usr/local/bin/node /app/services/game-arena/dist/server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=PORT="3002",NODE_ENV="production"
