<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><title>Migration Checklist (Individual Repos → Monorepo) - TiltCheck</title><meta name="description" content="Use this checklist for each legacy repository you migrate into the TiltCheck monorepo."/><link rel="stylesheet" href="/styles/base.css"/><style>body{background:#0a0a0a;color:#e0e0e0;font-family:Inter,system-ui,sans-serif;margin:0;padding:0}main{max-width:900px;margin:0 auto;padding:40px 18px;line-height:1.7}a{color:#00d4aa;text-decoration:none}a:hover{text-decoration:underline}.page-hero{padding:54px 24px 32px;background:linear-gradient(135deg,#121212,#181818);border-bottom:1px solid #222}.page-hero h1{margin:0 0 10px;font-size:2.4rem;background:linear-gradient(135deg,#00d4aa,#00a8ff);-webkit-background-clip:text;color:transparent}.lede{color:#aaa;font-size:1.05rem;max-width:760px}pre{background:#181818;padding:14px 16px;border:1px solid #222;border-radius:8px;overflow:auto;font-size:.85rem}code{font-family:ui-monospace,Monaco,Consolas,monospace;color:#00a8ff}.breadcrumb{font-size:.7rem;letter-spacing:.12em;text-transform:uppercase;color:#888;margin:0 0 12px}.nav-inline{display:flex;gap:20px;align-items:center;font-size:.8rem;padding:10px 20px;background:#111;border-bottom:1px solid #222}nav a{color:#aaa}nav a[aria-current="page"]{color:#00d4aa;font-weight:600}</style></head><body><nav class="nav-inline"><a href="/" >Home</a><a href="/docs/index.html" aria-current="page">Docs</a><a href="/dashboard">Dashboard</a><a href="/about.html">About</a></nav><header class="page-hero"><div class="breadcrumb">Docs / Migration Checklist (Individual Repos → Monorepo)</div><h1>Migration Checklist (Individual Repos → Monorepo)</h1><p class="lede">Use this checklist for each legacy repository you migrate into the TiltCheck monorepo.</p></header><main id="content"><h1>Migration Checklist (Individual Repos → Monorepo)</h1>

<p>Use this checklist for each legacy repository you migrate into the TiltCheck monorepo.</p>

<h2>1. Pre-Migration Assessment</h2>
<ul>
<li>[ ] Identify repository name & purpose</li>
<li>[ ] Confirm module maps to existing domain (suslink / justthetip / collectclock / trust-engine / freespsinscan / tiltcheck-core / poker-module)</li>
<li>[ ] Audit license headers (remove if conflicting; internal only)</li>
<li>[ ] Inventory env vars used</li>
<li>[ ] Inventory external services used (RPC, APIs, wallets)</li>
<li>[ ] Note Node & TypeScript versions</li>
<li>[ ] List custom types that may move to <code>@tiltcheck/types</code></li>
</ul>

<h2>2. Code Quality Gate</h2>
<ul>
<li>[ ] Run linter (or add temporary) and capture warnings</li>
<li>[ ] Run existing tests (if any)</li>
<li>[ ] Ensure no hard-coded secrets</li>
<li>[ ] Verify no custodial flows (fund custody, private keys)</li>
<li>[ ] Identify dead code</li>
</ul>

<h2>3. Mapping to Monorepo Structure</h2>
<p>Legacy → Monorepo:</p>
<pre class="code-block" data-lang=""><code>
/src/types      → packages/types (merge &amp; dedupe)
/src/events     → services/event-router (convert to publish/subscribe calls)
/src/lib        → modules/&lt;module-name&gt;/src/lib
/.env.example   → apps/discord-bot/.env.example (if shared) or module README
/tests          → &lt;module&gt;/tests (Vitest)
</code></pre>

<h2>4. Extraction Steps</h2>
<ul>
<li>[ ] Create new module directory <code>modules/&lt;name&gt;/</code></li>
<li>[ ] Add <code>package.json</code> with workspace deps</li>
<li>[ ] Add <code>tsconfig.json</code> extending root</li>
<li>[ ] Copy source code → <code>src/</code> (exclude build artifacts)</li>
<li>[ ] Replace internal event bus usage with <code>eventRouter.publish/subscribe</code></li>
<li>[ ] Move shared types to <code>packages/types</code> & import from there</li>
<li>[ ] Remove duplicated utility code (prefer <code>discord-utils</code> or shared packages)</li>
</ul>

<h2>5. Refactor Pass</h2>
<ul>
<li>[ ] Convert default exports to named exports (consistency)</li>
<li>[ ] Ensure no cross-module relative traversal (<code>../../../</code> replaced by package imports)</li>
<li>[ ] Add index barrel exports</li>
<li>[ ] Add minimal README describing purpose / events consumed / events emitted</li>
<li>[ ] Add registration snippet (if Discord commands needed)</li>
</ul>

<h2>6. Testing Setup</h2>
<ul>
<li>[ ] Create <code>tests/</code> folder with baseline test</li>
<li>[ ] Add Vitest config if missing</li>
<li>[ ] Write at least one unit test for core logic</li>
<li>[ ] Write one integration test using Event Router</li>
</ul>

<h2>7. Documentation</h2>
<ul>
<li>[ ] Update <code>STATUS.md</code> with module state</li>
<li>[ ] Update <code>docs/tiltcheck/10-data-models.md</code> if types changed</li>
<li>[ ] Update <code>docs/tiltcheck/12-apis.md</code> if new exposed API surfaces</li>
<li>[ ] Record migration date in CHANGELOG</li>
</ul>

<h2>8. Validation</h2>
<ul>
<li>[ ] Run <code>pnpm build</code> at root (all packages pass)</li>
<li>[ ] Run <code>pnpm test</code> (new tests pass)</li>
<li>[ ] Confirm no orphan workspace deps</li>
<li>[ ] Confirm module appears in <code>pnpm list --depth 0</code> as workspace</li>
</ul>

<h2>9. Cleanup</h2>
<ul>
<li>[ ] Archive legacy repo (read-only) or mark deprecated in README</li>
<li>[ ] Backfill tags/releases if needed</li>
<li>[ ] Remove old CI (GitHub Actions) referencing legacy structure</li>
</ul>

<h2>10. Post-Migration Observability</h2>
<ul>
<li>[ ] Add logging prefix <code>[ModuleName]</code> to new logs</li>
<li>[ ] Add event counts instrumentation (future metrics hook)</li>
<li>[ ] Verify Discord <code>/help</code> references new feature (if user facing)</li>
</ul>

<h2>11. Post-Migration Validation (Required)</h2>
<ul>
<li>[ ] Run CI locally if possible:</li>
<p>- <code>pnpm install &amp;&amp; pnpm build &amp;&amp; pnpm test &amp;&amp; pnpm coverage</code></p>
<li>[ ] Verify coverage report exists under <code>coverage/</code> and key files are included</li>
<li>[ ] Ensure <code>README.md</code> exists for the module (use <code>scripts/gen-readme-template.sh &lt;module-path&gt;</code> if missing)</li>
<li>[ ] Update <code>STATUS.md</code> with coverage status and TODOs</li>
<li>[ ] Smoke test event flow:</li>
<p>- Publish a sample event and confirm it appears in <code>eventRouter.getHistory()</code></p>
<p>- Confirm downstream modules react (if applicable)</p>
</ul>

<p>---</p>
<p><strong>Principles:</strong></p>
<ul>
<li>Non-custodial always</li>
<li>Minimize duplication (centralize in <code>@tiltcheck/types</code>, <code>discord-utils</code>)</li>
<li>Event-driven only (no direct cross-module imports for behavior)</li>
<li>Keep modules small & cheap to run</li>
</ul>
</main><footer style="padding:40px 24px;text-align:center;font-size:.75rem;color:#666;border-top:1px solid #222">TiltCheck Docs • Non-custodial • Signals only.</footer></body></html>