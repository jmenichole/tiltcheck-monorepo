<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Newsletter Signup – TiltCheck</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="canonical" href="/newsletter" />
  <meta name="description" content="Receive occasional updates on new trust tools, anti-tilt features, and safety improvements." />
  <link rel="stylesheet" href="/styles/theme.css" />
  <link rel="stylesheet" href="/styles/main.css" />
  <style>
    form.newsletter { max-width:480px; margin:2rem auto; background:#111; padding:1.25rem 1.5rem; border:1px solid #222; border-radius:8px; }
    form.newsletter label { display:block; margin:.75rem 0 .4rem; font-weight:600; }
    form.newsletter input[type=email] { width:100%; padding:.75rem 1rem; background:#0d0d0f; color:#fff; border:1px solid #333; border-radius:6px; }
    form.newsletter button { margin-top:1rem; padding:.75rem 1.25rem; background:#8027ff; border:none; border-radius:6px; color:#fff; font-weight:600; cursor:pointer; }
    .status { margin-top:1rem; font-size:.9rem; }
    .status.ok { color:#29d6a1; }
    .status.err { color:#ff4d4d; }
    .fineprint { font-size:.7rem; opacity:.6; margin-top:1rem; line-height:1.2; }
    .hidden-field { position:absolute; left:-9999px; top:-9999px; }
  </style>
</head>
<body class="content-page">
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Top Navigation -->
  <nav class="top-nav" role="navigation" aria-label="Primary navigation">
    <a href="/" class="nav-logo">
      <img src="/assets/logo/logocurrent.png" alt="TiltCheck" width="32" height="32">
      <span>TiltCheck</span>
    </a>
    <a href="/">Home</a>
    <a href="/casinos.html">Casinos</a>
    <a href="/degen-trust.html">Degens</a>
    <a href="/dashboard">Dashboard</a>
    <a href="/about.html">About</a>
    <div class="nav-dropdown" role="navigation" aria-label="Education & Help">
      <button class="nav-dropbtn" aria-haspopup="true" aria-expanded="false">Education & Help</button>
      <div class="nav-dropdown-content">
        <a href="/getting-started.html">Getting Started</a>
        <a href="/how-it-works.html">How It Works</a>
        <a href="/faq.html">FAQ</a>
        <a href="/glossary.html">Glossary</a>
        <a href="/responsible-gambling.html">Responsible Gambling</a>
      </div>
    </div>
    <div class="nav-dropdown" role="navigation" aria-label="Legal & Compliance">
      <button class="nav-dropbtn" aria-haspopup="true" aria-expanded="false">Legal</button>
      <div class="nav-dropdown-content">
        <a href="/privacy.html">Privacy Policy</a>
        <a href="/terms.html">Terms of Service</a>
        <a href="/responsible-gambling.html">Responsible Gambling</a>
      </div>
    </div>
    <a href="/contact.html">Contact</a>
    <a href="#" class="discord-login-btn">
      <svg width="18" height="18" viewBox="0 0 71 55" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
        <path d="M60.1 4.9C55.6 2.8 50.7 1.3 45.7.4c-.1 0-.2 0-.2.1-.6 1.1-1.3 2.6-1.8 3.7-5.5-.8-10.9-.8-16.3 0-.5-1.2-1.2-2.6-1.9-3.7 0-.1-.1-.1-.2-.1-5.1.9-9.9 2.4-14.4 4.5 0 0 0 0-.1.1C1.6 18.7-.9 32.1.3 45.4v.2c6.1 4.5 12 7.2 17.8 9 .1 0 .2 0 .2-.1 1.4-1.9 2.6-3.8 3.6-5.9.1-.1 0-.3-.1-.3-1.9-.7-3.8-1.6-5.5-2.6-.1-.1-.1-.3 0-.4.4-.3.7-.6 1.1-.9 0 0 .1-.1.2 0 11.6 5.3 24.2 5.3 35.7 0h.2c.4.3.7.6 1.1.9.1.1.1.3 0 .4-1.8 1-3.6 1.9-5.5 2.6-.1.1-.2.2-.1.3 1 2.1 2.3 4 3.6 5.9.1.1.1.1.2.1 5.8-1.8 11.7-4.5 17.8-9v-.2c1.5-15.3-2.5-28.6-10.5-40.4 0 0 0 0-.1-.1zM23.7 37.3c-3.5 0-6.4-3.2-6.4-7.2s2.8-7.2 6.4-7.2c3.6 0 6.4 3.2 6.4 7.2 0 4-2.9 7.2-6.4 7.2zm23.6 0c-3.5 0-6.4-3.2-6.4-7.2s2.8-7.2 6.4-7.2c3.6 0 6.4 3.2 6.4 7.2 0 4-2.9 7.2-6.4 7.2z"/>
      </svg>
      Login
    </a>
    <button class="hamburger-btn" aria-label="Open menu" aria-expanded="false" onclick="toggleMobileNav()">
      <span class="hamburger-icon"></span>
    </button>
  </nav>

  <!-- Mobile Navigation Overlay -->
  <div class="mobile-nav" id="mobileNav" aria-hidden="true">
    <div class="mobile-nav-links">
      <a href="/">Home</a>
      <a href="/casinos.html">Casinos</a>
      <a href="/degen-trust.html">Degens</a>
      <a href="/dashboard">Dashboard</a>
      <a href="/about.html">About</a>
      <a href="/how-it-works.html">How It Works</a>
      <a href="/faq.html">FAQ</a>
      <a href="/contact.html">Contact</a>
    </div>
    <div class="mobile-nav-section">
      <h3>Legal</h3>
      <a href="/privacy.html">Privacy Policy</a>
      <a href="/terms.html">Terms of Service</a>
      <a href="/responsible-gambling.html">Responsible Gambling</a>
    </div>
    <div class="mobile-nav-section">
      <a href="#" class="discord-login-btn" style="display: block; text-align: center; margin-top: 20px;">
        <svg width="20" height="20" viewBox="0 0 71 55" fill="currentColor" style="vertical-align: middle; margin-right: 8px;">
          <path d="M60.1 4.9C55.6 2.8 50.7 1.3 45.7.4c-.1 0-.2 0-.2.1-.6 1.1-1.3 2.6-1.8 3.7-5.5-.8-10.9-.8-16.3 0-.5-1.2-1.2-2.6-1.9-3.7 0-.1-.1-.1-.2-.1-5.1.9-9.9 2.4-14.4 4.5 0 0 0 0-.1.1C1.6 18.7-.9 32.1.3 45.4v.2c6.1 4.5 12 7.2 17.8 9 .1 0 .2 0 .2-.1 1.4-1.9 2.6-3.8 3.6-5.9.1-.1 0-.3-.1-.3-1.9-.7-3.8-1.6-5.5-2.6-.1-.1-.1-.3 0-.4.4-.3.7-.6 1.1-.9 0 0 .1-.1.2 0 11.6 5.3 24.2 5.3 35.7 0h.2c.4.3.7.6 1.1.9.1.1.1.3 0 .4-1.8 1-3.6 1.9-5.5 2.6-.1.1-.2.2-.1.3 1 2.1 2.3 4 3.6 5.9.1.1.1.1.2.1 5.8-1.8 11.7-4.5 17.8-9v-.2c1.5-15.3-2.5-28.6-10.5-40.4 0 0 0 0-.1-.1zM23.7 37.3c-3.5 0-6.4-3.2-6.4-7.2s2.8-7.2 6.4-7.2c3.6 0 6.4 3.2 6.4 7.2 0 4-2.9 7.2-6.4 7.2zm23.6 0c-3.5 0-6.4-3.2-6.4-7.2s2.8-7.2 6.4-7.2c3.6 0 6.4 3.2 6.4 7.2 0 4-2.9 7.2-6.4 7.2z"/>
        </svg>
        Login with Discord
      </a>
    </div>
  </div>

  <main id="main-content" class="container" style="padding-top: 2rem;">
    <header style="text-align: center; margin-bottom: 2rem;">
      <h1>Newsletter Signup</h1>
      <p>Low-noise updates about new tools, safety features, and trust ecosystem improvements. No spam, no selling emails.</p>
    </header>
  <form class="newsletter" id="newsletter-form" aria-labelledby="newsletter-heading">
    <h2 id="newsletter-heading" style="margin-top:0">Stay Informed</h2>
    <label for="email">Email address</label>
    <input id="email" name="email" type="email" required autocomplete="email" placeholder="you@example.com" aria-required="true" />
    <div class="hidden-field" aria-hidden="true">
      <label for="website">Website (leave blank)</label>
      <input id="website" name="website" type="text" tabindex="-1" />
    </div>
    <button type="submit">Subscribe</button>
    <div id="status" class="status" role="status" aria-live="polite"></div>
    <p class="fineprint">We only send when there is meaningful progress (roughly monthly or less). You can unsubscribe anytime. We never sell or share addresses. Stored as a simple hash list for privacy.</p>
  </form>
  <form class="newsletter" id="unsubscribe-form" aria-labelledby="unsubscribe-heading" style="margin-top:2rem">
    <h2 id="unsubscribe-heading" style="margin-top:0">Unsubscribe</h2>
    <p style="font-size:.85rem;opacity:.75">Enter the same email you used to subscribe. We store only a salted hash; this matches by recomputing that hash. If you subscribed before hashing was enabled, removal still works.</p>
    <label for="unsub-email">Email address</label>
    <input id="unsub-email" name="email" type="email" required autocomplete="email" placeholder="you@example.com" aria-required="true" />
    <button type="submit">Unsubscribe</button>
    <div id="unsub-status" class="status" role="status" aria-live="polite"></div>
  </form>
</main>
<footer class="site-footer"><div class="container"><p><a href="/">← Home</a></p></div></footer>
<script src="/breadcrumbs.js" defer></script>
<script>
  (function(){
    const form = document.getElementById('newsletter-form');
    const statusEl = document.getElementById('status');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      statusEl.textContent='Submitting…'; statusEl.className='status';
      const fd = new FormData(form);
      const data = Object.fromEntries(fd.entries());
      try {
        const res = await fetch('/api/newsletter/subscribe', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data) });
        const j = await res.json();
        if(j.ok){
          if(j.duplicate){ statusEl.textContent='Already subscribed ✔'; statusEl.className='status ok'; }
          else { statusEl.textContent='Subscribed! Welcome.'; statusEl.className='status ok'; form.reset(); }
        } else {
          statusEl.textContent = j.error || 'Subscription failed.'; statusEl.className='status err';
        }
      } catch(err) {
        statusEl.textContent='Network error.'; statusEl.className='status err';
      }
    });
    const unsubForm = document.getElementById('unsubscribe-form');
    const unsubStatus = document.getElementById('unsub-status');
    unsubForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      unsubStatus.textContent='Processing…'; unsubStatus.className='status';
      const fd = new FormData(unsubForm); const data = Object.fromEntries(fd.entries());
      try {
        const res = await fetch('/api/newsletter/unsubscribe', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data) });
        const j = await res.json();
        if(j.ok){ unsubStatus.textContent='Unsubscribed. You will no longer receive updates.'; unsubStatus.className='status ok'; unsubForm.reset(); }
        else { unsubStatus.textContent=j.error||'Unsubscribe failed.'; unsubStatus.className='status err'; }
      } catch(err){ unsubStatus.textContent='Network error.'; unsubStatus.className='status err'; }
    });
  })();
</script>
<script>
  // Mobile Navigation Toggle
  function toggleMobileNav() {
    const btn = document.querySelector('.hamburger-btn');
    const nav = document.getElementById('mobileNav');
    const isOpen = btn.classList.toggle('open');
    nav.classList.toggle('open', isOpen);
    btn.setAttribute('aria-expanded', isOpen);
    nav.setAttribute('aria-hidden', !isOpen);
    document.body.style.overflow = isOpen ? 'hidden' : '';
  }
  
  // Close mobile nav on link click
  document.querySelectorAll('.mobile-nav a').forEach(link => {
    link.addEventListener('click', () => {
      const nav = document.getElementById('mobileNav');
      if (nav.classList.contains('open')) {
        toggleMobileNav();
      }
    });
  });
  
  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && document.querySelector('.mobile-nav.open')) {
      toggleMobileNav();
    }
  });
  
  // Dropdown toggle for accessibility
  document.querySelectorAll('.nav-dropdown .nav-dropbtn').forEach(btn => {
    const content = btn.nextElementSibling;
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      content.style.display = expanded ? 'none' : 'block';
    });
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        btn.setAttribute('aria-expanded', 'false');
        content.style.display = 'none';
        btn.blur();
      }
    });
    document.addEventListener('click', (e) => {
      if (!btn.parentElement.contains(e.target)) {
        btn.setAttribute('aria-expanded', 'false');
        content.style.display = 'none';
      }
    });
  });
</script>
  <script src="/scripts/auth.js"></script>
</body>
</html>
