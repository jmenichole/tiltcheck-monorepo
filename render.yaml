# Render Blueprint for TiltCheck
# Split deployment: Static landing + Dynamic app services

services:
  # Unified Discord Bots - All bots in one Render container
  - type: web
    name: tiltcheck-bots
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile.bots
    numInstances: 1
    autoDeploy: true
    repo: https://github.com/jmenichole/tiltcheck-monorepo
    branch: main
    # Bots don't expose HTTP ports, so no healthcheck
    envVars:
      # Discord Bot Tokens & Config
      - key: DISCORD_TOKEN
        scope: runtime
        sync: false
      - key: DISCORD_CLIENT_ID
        scope: runtime
        sync: false
      - key: DISCORD_GUILD_ID
        scope: runtime
        sync: false
      - key: JUSTTHETIP_DISCORD_BOT_TOKEN
        scope: runtime
        sync: false
      - key: JUSTTHETIP_DISCORD_CLIENT_ID
        scope: runtime
        sync: false
      - key: JUSTTHETIP_FEE_WALLET
        scope: runtime
        sync: false
      # Discord Alert Channels
      - key: TRUST_ALERTS_CHANNEL_ID
        scope: runtime
        sync: false
      - key: SUPPORT_CHANNEL_ID
        scope: runtime
        sync: false
      # Supabase (data persistence)
      - key: SUPABASE_URL
        scope: runtime
        sync: false
      - key: SUPABASE_ANON_KEY
        scope: runtime
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        scope: runtime
        sync: false
      - key: SUPABASE_PUBLISHABLE_KEY
        scope: runtime
        sync: false
      # Solana
      - key: SOLANA_RPC_URL
        value: https://api.mainnet-beta.solana.com
        scope: runtime
      - key: SOLANA_NETWORK
        value: mainnet-beta
        scope: runtime
      # Backend API URL (Railway backend endpoint)
      - key: BACKEND_API_URL
        value: https://api.tiltcheck.com
        scope: runtime
      - key: NODE_ENV
        value: production
        scope: runtime

